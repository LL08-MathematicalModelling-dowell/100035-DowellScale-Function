{% load i18n %}
{% load  static %}
<html lang="en"><head>
    <title>Likert Scale</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <style media="all" id="fa-main">
  /*!
   * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
   * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
   */

   #horizontal h6{
       font-size: 18px;
       font-weight:bold;
       padding: 5px;
       min-height: 50px;
       display: flex;
       flex-wrap:wrap;
       align-items: center;
       justify-content: center;
       width: 120px;
       border-radius: 25px;
       margin: 5px;
       cursor: pointer;
   }



    #vertical h6{
        font-size: 18px;
        font-weight:bold;
        width: 120px;
        min-height: 50px;
        border-radius: 25px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 5px;
        cursor: pointer;
    }

    #vertical {
      font-size:2em;
        padding: 20px;
        display: flex;
        flex-direction: column;
        width: 100px;
        align-items: center;
        justify-content: space-between;
    }

    #labels-vert{
        display: none;
        justify-content: space-between;
        flex-direction: column;
        }

<!--   #horizontal h6{-->
<!--       font-size: 30px;-->
<!--       padding: 10px;-->
<!--       border-radius: 50%;-->
<!--       margin: 5px;-->
<!--   }-->

    #labels-vert{
        /*display: none;*/
        justify-content: space-between;
        flex-direction: column;
        }


   #horizontal{
       display: flex;
       flex-wrap:wrap;
       justify-content: center;
   }

</style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  </head>
  <body class=".bg-secondary">
      <div class="container">
          <div class="row" style="margin-top: 3%;">
              <div class="col-lg-1 col-md-2 d-sm-none"></div>
              <div class="col-lg-10 clo-md-8 col-sm-12 bg-info" style="border:silver 2px solid;box-shadow:2px 2px 2px 2px rgba(0,0,0,0.3)">
                  <form action="" method="POST" id ="myform" >
                      {% csrf_token %}
                          <h2 align="center"><u>Customize your scale</u></h2>
                          <div class="form-group col-md-6">
                              <label for="head">Name of Scale</label>
                              <input type="text" name="nameofscale" class="form-control" id="head" placeholder="Name of scale" required="">
                          </div>
                          <div class="form-group col-md-6">
                              <label for="orientation">Orientation</label>
                              <select id="orientation" class="form-control" name="orientation" required="True">
                                <option selected="">Choose...</option>
                                <option value="horizontal">Horizontal</option>
                                <option value="vertical">Vertical</option>
                              </select>
                            </div>                        
                          <div class="form-group col-md-6">
                            <label for="rcolor">Round Color</label>
                            <input type="color" name="rcolor" class="form-control" id="rcolor" placeholder="Font Color" required="">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="fcolor">Font Color</label>
                            <input type="color" name="fcolor" class="form-control" id="fcolor" placeholder="Scale Color" required="">
                        </div>

                          <div class="form-group col-md-6">
                            <label for="Likert">Label Type</label>
                            <select id="likert" class="form-control" name="labeltype" required="">
                              <option value="0">Select Label Type</option>
                              <option value="1">Text</option>
                              <option value="2">Image</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                          <label for="Likert">Label Scale Selection</label>
                          <select id="likert_scale_selection" class="form-control" name="likert" required="">
                            <option value="1">--Select Choice--</option>
                            <option value="2">Yes/No</option>
                            <option value="3">3 Points Scale</option>
                            <option value="4">4 Points Scale</option>
                            <option value="5">5 Points Scale</option>
                            <option value="7">7 Points Scale</option>
                            <option value="9">9 Points Scale</option>
                          </select>
                      </div>
                          <div class="form-group col-md-6">
                              <label for="time">Time</label>
                              <input type="text" name="time" class="form-control" id="time" placeholder="Time" required="">
                          </div>
                          <div class="form-group col-md-6" id = "scale_input" name="Scale_Input"></div>
                          <div class="form-group col-md-12 text-right p-15">
                          <button type="submit" class="btn btn-primary" form="myform">Save</button>
                          <a onclick="preview();" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">Preview</a>
                        </div>
                    </form>
              </div>
              <div class="col-lg-1 col-md-2 d-sm-none" id="ghost">
                   <!--<img src="https://100014.pythonanywhere.com/media/brandlogos/thumbnails/" width="90%" height="100%" style="height:150px" alt="your logo"><hr>-->
                   <!--               	<div style="font-size:20px">Considering your experience with <b></b>, how likely would you be to recommend <b></b> to your friend or colleague<br></div><hr>-->
                   <!--                   <div class="horizontal d-flex justify-content-center" id="red"></div>-->
                   <!--                   <center><div class="d-flex justify-content-center" id="horizontal"></div></center>-->
                   <!--                   <hr>-->
                   <!--                   <br>-->
              </div>
                  
                      <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h2 class="modal-title" id="exampleModalLongTitle" align="center"></h2>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">Ã—</span>
                              </button>
                            </div>
                            <div class="modal-body" id="modal-body">
                              <div class="horizontal d-flex justify-content-center" id="red"></div>
                              <center><div id="horizontal"></div></center>
                              <br>
                              </div>

                              <!--<div class="pl-3" id="labels-vert" style="font-size:2em">-->
                              <!--  <div></div>-->
                              <!--  <div></div>-->
                              <!--  <div></div>-->
                              <!--</div>-->
                            </div>
                            <div class="modal-footer">
                              <!--button type="submit" class="btn btn-secondary" onclick=Submit()>Save<-/button>-->
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                              <!--<button type="button" class="btn btn-primary">Save changes</button>-->
                            </div>
                          </div>
                        </div>
                      </div>
          </div>
      </div>
  </body></html>

<script>
                  var vert="vertical";
                  var hori="horizontal";
                  //function Submit(){
                    //document.getElementById("myform").submit();
                  //}

                  let head_name;
                  let orient;
                  let rcolor;
                  let fcolor;
                  let time;
                  let labels;
                  function myName() {
                      head_name = document.getElementById("head").value;
                  }
                  function myRcolor() {
                      rcolor = document.getElementById("rcolor").value;
                  }
                  function myFcolor() {
                      fcolor = document.getElementById("fcolor").value;
                  }
                  function myTime() {
                      time = document.getElementById("time").value;
                  }
                  function myLabel() {
                    labels = document.getElementById("likert").value;
                }
                function myScale() {
                  likert_scale_selection = document.getElementById("likert_scale_selection").value;}
                  var e = document.getElementById("orientation");
                  function onChange() { orient = e.value};
                  e.onchange = onChange;
                  onChange();
            function preview(){
              
              if (head_name === "undefined" || orient === "Choose..."|| rcolor === "undefined" || time === "undefined" ){
                alert("Fields can't be empty")
                return document.getElementById("modalContent").style.display = "none"}

                  var scale_bg = document.getElementById("horizontal")
                  var orientation = document.getElementById("orientation")
                  var vert = document.getElementById("vert-div")
                  //scale_bg.style.background = "#FFFFFF";
                  //scale_bg.style.padding = "20px 20px";
                  var lab_hor= document.getElementById("lab-hor");
                  var modal= document.getElementById("modal-body");
                  var e = document.getElementById("orientation");
                  var value = e.value;
                      
                 // if (value ==="vertical" ){
                 //       scale_bg.style.flexDirection = "column";
                  //      scale_bg.style.width = "100px";
                 //       scale_bg.style.margin = "auto";
                  //      modal.style.display = "flex";
                 //       modal.style.justifyContent = "center";
                 //     }
                 // else {
                        //scale_bg.style.flexDirection = "row";
                 //       modal.style.flexDirection = "column";
                        //scale_bg.style.width = "unset";
                  //    }
                  var named = document.getElementById("scale_input");
                  var tags = named.getElementsByTagName("input");
                  const inputArray =[...tags].map(tag => tag.value);
              

                  document.getElementById("exampleModalLongTitle").innerHTML=$("#head").val();
                  $("#red").attr('class', $("#orientation").val());
                  $('#horizontal').attr("id", $("#orientation").val());
                  em=$("#orientation").val();
                  $('#'+em).empty();
                  $('#red').css({"backgroundColor": "#FFFFFF"})
                  
                  var name = $('#likert').val();
                  n = Number(setScale())
                  var mbuttons =[];
                  
                  $(document).ready(function() {
                  mbuttons = document.getElementsByClassName("input");
                  if (mbuttons.length >= 0) {
                      for (var i = 0; i < mbuttons.length; i++) {
                          mbuttons[i].style.cursor = 'pointer'
                          mbuttons[i].onclick = function(){
                              this.style.backgroundColor = 'red';
                              console.log(this.innerHTML)}
                          mbuttons[i].ondblclick = function(){
                              this.style.backgroundColor = 'white';
                                  }
                          mbuttons[i].onmouseover = function(){
                              this.style.backgroundColor = $("#rcolor").val();
                              }
                          mbuttons[i].onmouseout = function(){
                              if (this.style.backgroundColor === 'red'){
                              this.style.backgroundColor = 'red';}
                              else{
                                  this.style.backgroundColor = 'white';
                              } }

            }}});      
                  ram(name, n, inputArray);
}
                 
                 const image= document.getElementById('likert')
                 image.addEventListener('change', clearAll);
                 function clearAll(){
                  if (image.value==='2'||image.value==='0'){
                    var container = document.getElementById("scale_input");
                    // Remove every children it had before
                    while (container.hasChildNodes()) {
                        container.removeChild(container.lastChild);
                    }
                  }
                 };

                  function ram(star,num, input){
                        for (let i = 0; i < num; i++) {
                        const para = document.createElement("h6");
                        para.id=i
                        para.classList.add("input");
                        document.getElementById($("#orientation").val()).appendChild(para);
                        
                        
                        if(star==="2" && num===2){
                          const emoji=["&#x1F603","&#128532"];
                          document.getElementById(i).innerHTML = emoji[i];
                        }
                        else if(star==="2" && num===3){
                          const emoji=["&#128532","&#128578","&#x1F603"];
                          document.getElementById(i).innerHTML = emoji[i];
                        }
                        else if(star==="2" && num===4){
                          const emoji=["&#128545","&#128532","&#128522","&#x1F603"];
                          document.getElementById(i).innerHTML = emoji[i];
                        }
                        else if(star==="2" && num===5){
                          const emoji=["&#128545","&#128532","&#128578","&#128522","&#x1F603"];
                          document.getElementById(i).innerHTML = emoji[i];
                        }
                        else if(star==="2" && num===7){
                          const emoji=["&#128545","&#128530","&#128533","&#128578","&#128522","&#128512","&#x1F603"];
                          document.getElementById(i).innerHTML = emoji[i];
                        }
                        else if(star==="2" && num===9){
                          const emoji=["&#128545","&#128534","&#128530","&#128533","&#128578","&#128512","&#128516","&#x1F603","&#128525"];
                          document.getElementById(i).innerHTML = emoji[i];
                        }
                         else{
                             document.getElementById(i).innerHTML = input[i];
                             //document.getElementById(i).style.backgroundColor = $("#rcolor").val();
                             document.getElementById(i).style.backgroundColor = "#FFFFFF";
                         }


                       document.getElementById(i).style.color = $("#fcolor").val();
                    }
                    }


                  const select = document.getElementById('likert_scale_selection')
                  var label = document.getElementById('numberof')
                  select.addEventListener('change', setScale);
                  function setScale(){
                    const choice = select.value;
                    if (choice==="2"){
                      if (image.value==='1'){
                        label = "2";
                        addFields(num=Number(label));}
                      else if(image.value==='2'){
                        label = "2";}

                      return label;

                    }
                    else if (choice==="3"){
                      if (image.value==='1'){
                        label = "3";
                        addFields(num=Number(label));}
                      else if(image.value==='2'){
                        label = "3";}

                      return label;

                    }
                    else if (choice==="4"){
                      if (image.value==='1'){
                        label = "4";
                        addFields(num=Number(label));}
                      else if(image.value==='2'){
                        label = "4";}

                      return label;
                    }
                    else if (choice==="5"){
                      if (image.value==='1'){
                        label = "5";
                        addFields(num=Number(label));}
                      else if(image.value==='2'){
                        label = "5";}

                      return label;
                    }
                    else if (choice==="7"){
                      if (image.value==='1'){
                        label = "7";
                        addFields(num=Number(label));}
                      else if(image.value==='2'){
                        label = "7";}

                      return label;
                    }
                    else if (choice==="9"){
                      if (image.value==='1'){
                        label = "9";
                        addFields(num=Number(label));}
                      else if(image.value==='2'){
                        label = "9";}

                      return label;
                    }
                  }
                  function addFields(num){
                    // Generate a dynamic number of inputs
                    var number = num;
                    // Get the element where the inputs will be added to
                    var container = document.getElementById("scale_input");
                    // Remove every children it had before
                    while (container.hasChildNodes()) {
                    container.removeChild(container.lastChild);
                    }
                    for (i=0;i<number;i++){
                        // Append a node with a random text
                        container.appendChild(document.createTextNode("Label Input " + (i+1)));
                        // Create an <input> element, set its type and name attributes
                        var input = document.createElement("input");
                        input.type = "text";
                        input.name = "scale_choice " + i;
                        input.class = "form-control"
                        input.id = "head1";
                        
                        

                        container.appendChild(input);
                        // Append a line break
                        
                        container.appendChild(document.createElement("br"));

                    }
                }


                  </script>
